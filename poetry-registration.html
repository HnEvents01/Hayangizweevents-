<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n-key="poetryReg.pageTitle">Register | Poetry Slam 2026</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Loading overlay styles */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 248, 248, 0.9);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
    }
    
    .loading-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #d4a574;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }
    
    .loading-text {
      font-size: 18px;
      color: #333;
      font-weight: 500;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Hide the duplicate language selector buttons, exactly as in blog.html */
    .language-selector {
      display: none;
    }
  </style>
</head>
<body style="background-color: #FFF8F8;">

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-spinner"></div>
  <div class="loading-text" data-i18n-key="loading.text">Loading language...</div>
</div>

  <header>
    <a href="index.html" class="logo-container">
      <img src="IMAGES/logo.png" alt="Haya Ngizwe Events Logo" class="logo-image">
    </a>
    <div class="menu-toggle" id="mobile-menu">
        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
    </div>
    <nav class="nav-menu">
      <a href="index.html" data-i18n-key="nav.home">Home</a>
      <a href="about.html" data-i18n-key="nav.about">About</a>
      <a href="services.html" data-i18n-key="nav.services">Services</a>
      <a href="events.html" data-i18n-key="nav.events">Events</a>
      <a href="gallery.html" data-i18n-key="nav.gallery">Gallery</a>
      <a href="blog.html" data-i18n-key="nav.blog">Blog</a>
      <a href="contact.html" data-i18n-key="nav.contact">Contact</a>
      
      <select id="language-selector" style="margin-left:10px;padding:5px;border-radius:5px;">
        <option value="en">English</option>
        <option value="zu">IsiZulu</option>
        <option value="st">Sesotho</option>
      </select>
      <!-- This div and its buttons are hidden by the .language-selector CSS rule -->
      <div class="language-selector">
        <button class="language-btn active" data-lang="en">EN</button>
        <button class="language-btn" data-lang="zu">ZU</button>
        <button class="language-btn" data-lang="st">ST</button>
      </div>
    </nav>
  </header>

  <div class="page-title">
    <h1 data-i18n-key="poetryReg.heading">The Big 5 Poetry Slam 2026</h1>
    <p data-i18n-key="poetryReg.tagline">Compete in the biggest poetry showdown and make your voice heard!</p>
  </div>

  <div class="container form-container">
    <div class="countdown" id="countdown">
      <span data-i18n-key="poetryReg.countdownLoading">Countdown loading...</span>
    </div>
    <div class="closed-message">
        <h3 data-i18n-key="poetryReg.closedTitle">Registrations Are Currently Closed</h3>
        <p data-i18n-key="poetryReg.closedText">Thank you for your interest in the The Big 5 Poetry Slam 2026. Registrations have not yet opened. Please check back later for updates!</p>
    </div>
    <form>
      <fieldset disabled>
          <label for="fullname" data-i18n-key="poetryReg.labelFullname">Full Name:</label>
          <input type="text" id="fullname" name="fullname" data-i18n-key="poetryReg.placeholderClosed" placeholder="Registrations are closed" />
          
          <label for="email" data-i18n-key="poetryReg.labelEmail">Email Address:</label>
          <input type="email" id="email" name="email" data-i18n-key="poetryReg.placeholderClosed" placeholder="Registrations are closed" />
          
          <label for="phone" data-i18n-key="poetryReg.labelPhone">Phone Number:</label>
          <input type="tel" id="phone" name="phone" data-i18n-key="poetryReg.placeholderClosed" placeholder="Registrations are closed" />
          
          <label for="bio" data-i18n-key="poetryReg.labelBio">Short Artist Bio / Message:</label>
          <textarea id="bio" name="bio" rows="4" data-i18n-key="poetryReg.placeholderClosed" placeholder="Registrations are closed"></textarea>
          
          <button type="submit" data-i18n-key="poetryReg.submitButton">Submit Registration</button>
      </fieldset>
    </form>
  </div>
  
  <footer>
    © 2025 Haya Ngizwe Events · <span data-i18n-key="footer.tagline">Creating Moments to Cherish forever</span><br>
  </footer>

  <script>
    const menu = document.querySelector('#mobile-menu');
    const navMenu = document.querySelector('.nav-menu');
    menu.addEventListener('click', () => navMenu.classList.toggle('active'));
    
    const countdownEl = document.getElementById("countdown");
    const targetDate = new Date("August 1, 2026 00:00:00").getTime();
    
    function updateCountdown() {
      const now = new Date().getTime();
      const distance = targetDate - now;
      let countdownText = "";

      // Get current language from localStorage or default to 'en'
      const lang = localStorage.getItem("language") || "en";
      const translationsForCountdown = translations[lang];

      if (distance < 0) {
        countdownText = translationsForCountdown["poetryReg.eventSeason"];
      } else {
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        countdownText = `${translationsForCountdown["poetryReg.eventStartsIn"]}: ${days}${translationsForCountdown["poetryReg.daysShort"]} ${hours}${translationsForCountdown["poetryReg.hoursShort"]} ${minutes}${translationsForCountdown["poetryReg.minutesShort"]} ${seconds}${translationsForCountdown["poetryReg.secondsShort"]}`;
      }
      countdownEl.innerHTML = `<span data-i18n-key="countdown.display">${countdownText}</span>`; 
    }
    
    setInterval(updateCountdown, 1000);
    // Initial call to set the countdown text immediately
    // Note: The `applyLanguage` function will also call updateCountdown indirectly
    // to ensure it updates with the correct language on page load.
  </script>

  <!-- MULTILINGUAL SCRIPT -->
  <script>
    // First, let's collect the original English text from the HTML
    function collectOriginalEnglishText() {
      const elements = document.querySelectorAll("[data-i18n-key]");
      const originalTexts = {};
      
      elements.forEach(el => {
        const key = el.dataset.i18nKey;
        if (el.tagName === 'TITLE') {
          originalTexts[key] = el.textContent; 
        } else if (el.placeholder) { // Handle placeholders for input fields
          originalTexts[key] = el.placeholder;
        } else if (el.value && (el.tagName === 'INPUT' || el.tagName === 'BUTTON')) { // Handle button text or input values
           originalTexts[key] = el.value;
        }
        else if (el.innerText && el.innerText.trim()) {
          originalTexts[key] = el.innerText;
        }
      });
      
      return originalTexts;
    }

    const originalEnglish = collectOriginalEnglishText();

    const translations = {
      en: {
        ...originalEnglish, // Use collected original texts
        "nav.home":"Home",
        "nav.about":"About",
        "nav.services":"Services",
        "nav.events":"Events",
        "nav.gallery":"Gallery",
        "nav.blog":"Blog",
        "nav.contact":"Contact",
        "poetryReg.pageTitle":"Register | Poetry Slam 2026",
        "poetryReg.heading":"The Big 5 Poetry Slam 2026",
        "poetryReg.tagline":"Compete in the biggest poetry showdown and make your voice heard!",
        "poetryReg.countdownLoading":"Countdown loading...",
        "poetryReg.closedTitle":"Registrations Are Currently Closed",
        "poetryReg.closedText":"Thank you for your interest in the The Big 5 Poetry Slam 2026. Registrations have not yet opened. Please check back later for updates!",
        "poetryReg.labelFullname":"Full Name:",
        "poetryReg.labelEmail":"Email Address:",
        "poetryReg.labelPhone":"Phone Number:",
        "poetryReg.labelBio":"Short Artist Bio / Message:",
        "poetryReg.placeholderClosed":"Registrations are closed",
        "poetryReg.submitButton":"Submit Registration",
        "poetryReg.eventSeason":"The 2026 event season is here!",
        "poetryReg.eventStartsIn":"Event starts in",
        "poetryReg.daysShort":"d",
        "poetryReg.hoursShort":"h",
        "poetryReg.minutesShort":"m",
        "poetryReg.secondsShort":"s",
        "footer.tagline":"Creating Moments to Cherish forever",
        "loading.text":"Loading language..."
      },

      zu: {
        "nav.home":"Ekhaya",
        "nav.about":"Mayelana",
        "nav.services":"Izinsiza",
        "nav.events":"Imicimbi",
        "nav.gallery":"Izithombe",
        "nav.blog":"Ibhulogi",
        "nav.contact":"Xhumana",
        "poetryReg.pageTitle":"Bhalisa | I-Poetry Slam 2026",
        "poetryReg.heading":"I-The Big 5 Poetry Slam 2026",
        "poetryReg.tagline":"Qhudelana emqhudelwaneni omkhulu wezinkondlo futhi izwi lakho lizwakale!",
        "poetryReg.countdownLoading":"Kubalwa phansi...",
        "poetryReg.closedTitle":"Ukubhalisa Kuvaliwe Okwamanje",
        "poetryReg.closedText":"Siyabonga ngentshisekelo yakho ku-The Big 5 Poetry Slam 2026. Ukubhalisa akukavulwa okwamanje. Sicela ubuyele kamuva ukuze uthole izibuyekezo!",
        "poetryReg.labelFullname":"Igama Eligcwele:",
        "poetryReg.labelEmail":"Ikheli Le-imeyli:",
        "poetryReg.labelPhone":"Inombolo Yocingo:",
        "poetryReg.labelBio":"Umlando Omfishane Womculi / Umlayezo:",
        "poetryReg.placeholderClosed":"Ukubhalisa kuvaliwe",
        "poetryReg.submitButton":"Hambisa Ukubhalisa",
        "poetryReg.eventSeason":"Isizini yemicimbi ka-2026 isifikile!",
        "poetryReg.eventStartsIn":"Umcimbi uqala ngemuva",
        "poetryReg.daysShort":"izinsuku",
        "poetryReg.hoursShort":"amahora",
        "poetryReg.minutesShort":"imizuzu",
        "poetryReg.secondsShort":"imizuzwana",
        "footer.tagline":"Sakha Izikhathi Eziyigugu Ezingasoze Zalibaleka",
        "loading.text":"Ilayisha ulimi..."
      },

      st: {
        "nav.home":"Lehae",
        "nav.about":"Mabapi",
        "nav.services":"Ditshebeletso",
        "nav.events":"Diketsahalo",
        "nav.gallery":"Gallery",
        "nav.blog":"Blog",
        "nav.contact":"Ikopanye",
        "poetryReg.pageTitle":"Ngolisa | Poetry Slam 2026",
        "poetryReg.heading":"The Big 5 Poetry Slam 2026",
        "poetryReg.tagline":"Tlhodisana tlhodisanong e kgolo ya dithothokiso mme lentswe la hao le utlwahale!",
        "poetryReg.countdownLoading":"Ho bala fatshe...",
        "poetryReg.closedTitle":"Dingoliso di Koletswe Hajoale",
        "poetryReg.closedText":"Re leboha thahasello ya hao ho The Big 5 Poetry Slam 2026. Dingoliso ha di so bulehe. Ka kopo, hlahloba hape hamorao bakeng sa diphetoho!",
        "poetryReg.labelFullname":"Leloko le Feletseng:",
        "poetryReg.labelEmail":"Aterese ya Imeile:",
        "poetryReg.labelPhone":"Nomoro ya Mohala:",
        "poetryReg.labelBio":"Tlhaloso e Khutšoanyane ea Motaki / Molaetsa:",
        "poetryReg.placeholderClosed":"Dingoliso di koletswe",
        "poetryReg.submitButton":"Romela Ngoliso",
        "poetryReg.eventSeason":"Nako ya diketsahalo tsa 2026 e fihlile!",
        "poetryReg.eventStartsIn":"Ketsahalo e qala ka",
        "poetryReg.daysShort":"matsatsi",
        "poetryReg.hoursShort":"dihora",
        "poetryReg.minutesShort":"metsotso",
        "poetryReg.secondsShort":"metsotswana",
        "footer.tagline":"Ho Bopa Dinako Tse Ke Keng Tsa Lebaleha",
        "loading.text":"Ho lata puo..."
      }
    };

    // Add loading text to English translations if not already there
    if (!translations.en["loading.text"]) {
      translations.en["loading.text"] = "Loading language...";
    }

    function applyLanguage(lang){
      document.querySelectorAll("[data-i18n-key]").forEach(el=>{
        const key = el.dataset.i18nKey;
        if(translations[lang] && translations[lang][key]) {
          if (el.tagName === 'TITLE') {
            el.textContent = translations[lang][key];
          } else if (el.placeholder) {
            el.placeholder = translations[lang][key];
          } else if (el.tagName === 'INPUT' && el.type === 'submit') { // For submit buttons with value attribute
            el.value = translations[lang][key];
          } else {
            el.innerText = translations[lang][key];
          }
        }
      });
      updateCountdown(); // Call updateCountdown to refresh its text in the new language
    }

    function showLoading() {
      const loadingOverlay = document.getElementById('loadingOverlay');
      loadingOverlay.classList.add('active');
    }

    function hideLoading() {
      const loadingOverlay = document.getElementById('loadingOverlay');
      loadingOverlay.classList.remove('active');
    }

    // Language change handler
    function changeLanguage(lang) {
      // Close mobile menu
      const navMenu = document.querySelector('.nav-menu'); 
      if (navMenu) {
        navMenu.classList.remove('active');
      }
      
      // Show loading overlay
      showLoading();
      
      // Update language in localStorage
      localStorage.setItem("language", lang);
      
      // Apply language after a short delay to show loading effect
      setTimeout(() => {
        applyLanguage(lang);
        
        // Update selector value
        const selector = document.getElementById("language-selector"); 
        if (selector) {
          selector.value = lang;
        }
        
        // Update active class on language buttons (though they are hidden by CSS)
        document.querySelectorAll('.language-btn').forEach(button => {
          if (button.dataset.lang === lang) {
            button.classList.add('active');
          } else {
            button.classList.remove('active');
          }
        });

        // Hide loading overlay
        hideLoading();
      }, 600); // 600ms delay to show loading effect
    }

    // Initialize
    const selector = document.getElementById("language-selector");
    const savedLang = localStorage.getItem("language") || "en";
    
    if (selector) { 
      selector.value = savedLang;
    }

    // Only apply language if it's not English (English is already in the HTML)
    // and if it's not the initial load of English, which is already present.
    if (savedLang !== "en") {
      applyLanguage(savedLang);
    } else {
      // If it's English, ensure the 'active' class is set on the English button
      document.querySelectorAll('.language-btn').forEach(button => {
        if (button.dataset.lang === 'en') {
          button.classList.add('active');
        } else {
          button.classList.remove('active');
        }
      });
      updateCountdown(); // Also update countdown for initial English load
    }


    // Event listener for language selector (dropdown)
    if (selector) { 
      selector.addEventListener("change", (e)=>{
        const selectedLang = e.target.value;
        changeLanguage(selectedLang);
      });
    }

    // Event listener for language buttons (optional, as they are hidden by CSS)
    document.querySelectorAll('.language-btn').forEach(button => {
      button.addEventListener('click', (e) => {
        const lang = e.target.getAttribute('data-lang');
        changeLanguage(lang);
      });
    });
  </script>

</body>
</html>